<div class="backend-status-container">
    <div class="status-header">
        <h3><i class="fas fa-server"></i> Backend Server Status</h3>
        <button class="btn-refresh" @onclick="RefreshStatus" disabled="@isLoading">
            <i class="fas @(isLoading ? "fa-spinner fa-spin" : "fa-sync-alt")"></i>
            @(isLoading ? "Opdaterer..." : "Opdater")
        </button>
    </div>

    @if (isLoading && backendStatus == null)
    {
        <div class="loading-state">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Tjekker backend status...</span>
        </div>
    }
    else if (backendStatus != null)
    {
        <div class="status-grid">
            <div class="status-card @(GetStatusClass("server"))">
                <div class="status-icon">
                    <i class="fas fa-server"></i>
                </div>
                <div class="status-info">
                    <h4>Opgaver API</h4>
                    <p class="status-text">@backendStatus.Server?.Status</p>
                    <p class="api-url">opgaver.mercantec.tech</p>
                </div>
                <div class="status-indicator">
                    <i class="fas @(GetStatusIcon("server"))"></i>
                </div>
            </div>

            <div class="status-card @(GetStatusClass("mongodb"))">
                <div class="status-icon database-logo">
                    <img src="assets/mongodb.png" alt="MongoDB" class="database-image" />
                </div>
                <div class="status-info">
                    <h4>MongoDB</h4>
                    <p class="status-text">@backendStatus.MongoDB?.Status</p>
                    @if (!string.IsNullOrEmpty(backendStatus.MongoDB?.Database))
                    {
                        <p class="database-name">Database: @backendStatus.MongoDB.Database</p>
                    }
                </div>
                <div class="status-indicator">
                    <i class="fas @(GetStatusIcon("mongodb"))"></i>
                </div>
            </div>

            <div class="status-card @(GetStatusClass("postgresql"))">
                <div class="status-icon database-logo">
                    <img src="assets/postgres.png" alt="PostgreSQL" class="database-image" />
                </div>
                <div class="status-info">
                    <h4>PostgreSQL</h4>
                    <p class="status-text">@backendStatus.PostgreSQL?.Status</p>
                    @if (!string.IsNullOrEmpty(backendStatus.PostgreSQL?.Database))
                    {
                        <p class="database-name">Database: @backendStatus.PostgreSQL.Database</p>
                    }
                </div>
                <div class="status-indicator">
                    <i class="fas @(GetStatusIcon("postgresql"))"></i>
                </div>
            </div>
        </div>

        <div class="timestamp">
            <i class="fas fa-clock"></i>
            Sidst opdateret: @backendStatus.Timestamp.ToLocalTime().ToString("dd/MM/yyyy HH:mm:ss")
        </div>
    }
    else
    {
        <div class="error-state">
            <i class="fas fa-exclamation-triangle"></i>
            <h4>Kunne ikke forbinde til backend</h4>
            <p>Der opstod en fejl ved forsøg på at tjekke backend status. Prøv igen senere.</p>
        </div>
    }
</div>
